<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>clj-foundationdb.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-foundationdb</span> <span class="project-version">0.0.2-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-foundationdb</span></div></div></li><li class="depth-2 branch current"><a href="clj-foundationdb.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="clj-foundationdb.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-foundationdb.core.html#var-*subspace*"><div class="inner"><span>*subspace*</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-clear-all"><div class="inner"><span>clear-all</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-clear-key"><div class="inner"><span>clear-key</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-clear-range"><div class="inner"><span>clear-range</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-first-greater-or-equal"><div class="inner"><span>first-greater-or-equal</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-first-greater-than"><div class="inner"><span>first-greater-than</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-get-all"><div class="inner"><span>get-all</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-get-range"><div class="inner"><span>get-range</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-get-range-startswith"><div class="inner"><span>get-range-startswith</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-get-val"><div class="inner"><span>get-val</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-last-less-or-equal"><div class="inner"><span>last-less-or-equal</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-last-less-than"><div class="inner"><span>last-less-than</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-make-subspace"><div class="inner"><span>make-subspace</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-serializable.3F"><div class="inner"><span>serializable?</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-set-keys"><div class="inner"><span>set-keys</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-set-val"><div class="inner"><span>set-val</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-tr.21"><div class="inner"><span>tr!</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-tr.3F"><div class="inner"><span>tr?</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-watch"><div class="inner"><span>watch</span></div></a></li><li class="depth-1"><a href="clj-foundationdb.core.html#var-with-subspace"><div class="inner"><span>with-subspace</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">clj-foundationdb.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-*subspace*"><h3>*subspace*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L43">view source</a></div></div><div class="public anchor" id="var-clear-all"><h3>clear-all</h3><div class="usage"><code>(clear-all tr)</code></div><div class="doc"><div class="markdown"><p>Clear all keys from the database</p></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L297">view source</a></div></div><div class="public anchor" id="var-clear-key"><h3>clear-key</h3><div class="usage"><code>(clear-key tr key)</code></div><div class="doc"><div class="markdown"><p>Clear a key from the database</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db (clear-key tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L156">view source</a></div></div><div class="public anchor" id="var-clear-range"><h3>clear-range</h3><div class="usage"><code>(clear-range tr begin)</code><code>(clear-range tr begin end)</code></div><div class="doc"><div class="markdown"><p>Clear a range of keys from the database. When only begin is given then the keys with starting with the tuple are cleared. When begin and end are specified then end is exclusive of the range to be cleared.</p>
<pre><code>(let [fd    (select-api-version 520)
      begin "foo"]
(with-open [db (open fd)]
   (tr! db (clear-range tr begin))))

(let [fd    (select-api-version 520)
      begin "foo"
      end   "foo"]
(with-open [db (open fd)]
   (tr! db (clear-range tr begin end))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L265">view source</a></div></div><div class="public anchor" id="var-first-greater-or-equal"><h3>first-greater-or-equal</h3><div class="usage"><code>(first-greater-or-equal tr key)</code><code>(first-greater-or-equal tr key limit)</code></div><div class="doc"><div class="markdown"><p>Returns key and value pairs with keys greater than or equal to the given key for the given limit</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db (first-greater-or-equal tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L373">view source</a></div></div><div class="public anchor" id="var-first-greater-than"><h3>first-greater-than</h3><div class="usage"><code>(first-greater-than tr key)</code><code>(first-greater-than tr key limit)</code></div><div class="doc"><div class="markdown"><p>Returns key and value pairs with keys greater than the given key for the given limit</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db (first-greater-than tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L351">view source</a></div></div><div class="public anchor" id="var-get-all"><h3>get-all</h3><div class="usage"><code>(get-all tr)</code></div><div class="doc"><div class="markdown"><p>Get all key values as a vector</p></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L254">view source</a></div></div><div class="public anchor" id="var-get-range"><h3>get-range</h3><div class="usage"><code>(get-range tr begin)</code><code>(get-range tr begin end)</code></div><div class="doc"><div class="markdown"><p>Get a range of key values as a vector</p>
<pre><code>(let [fd    (select-api-version 520)
      begin "foo"
      end   "foo"]
(with-open [db (open fd)]
   (tr! db (get-range tr begin end))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L227">view source</a></div></div><div class="public anchor" id="var-get-range-startswith"><h3>get-range-startswith</h3><div class="usage"><code>(get-range-startswith tr prefix)</code></div><div class="doc"><div class="markdown"><p>Get a range of key values as a vector that starts with prefix</p>
<pre><code>(let [fd     (select-api-version 520)
      prefix "f"]
(with-open [db (open fd)]
   (tr! db (get-range-startswith tr key prefix))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L173">view source</a></div></div><div class="public anchor" id="var-get-val"><h3>get-val</h3><div class="usage"><code>(get-val tr key &amp; {:keys [subspace coll], :or {subspace *subspace*, coll false}})</code></div><div class="doc"><div class="markdown"><p>Get the value for the given key. Accepts the below :</p>
<p>:subspace - Subspace to be prefixed :coll - Boolean to indicate if the value needs to be deserialized as collection</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db
        (get-val tr key))))

(let [fd    (select-api-version 520)
     key   "foo"
     value [1 2 3]]
(with-open [db (open fd)]
  (tr! db
       (set-val tr key value)
       (get-val tr key) ;; 1
       (get-val tr key :coll true)))) ;; [1 2 3]
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L78">view source</a></div></div><div class="public anchor" id="var-last-less-or-equal"><h3>last-less-or-equal</h3><div class="usage"><code>(last-less-or-equal tr key)</code><code>(last-less-or-equal tr key limit)</code></div><div class="doc"><div class="markdown"><p>Returns key and value pairs with keys less than or equal the given key for the given limit</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db (last-less-or-equal tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L329">view source</a></div></div><div class="public anchor" id="var-last-less-than"><h3>last-less-than</h3><div class="usage"><code>(last-less-than tr key)</code><code>(last-less-than tr key limit)</code></div><div class="doc"><div class="markdown"><p>Returns key and value pairs with keys less than the given key for the given limit</p>
<pre><code>(let [fd  (select-api-version 520)
      key "foo"]
(with-open [db (open fd)]
   (tr! db (last-less-than tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L307">view source</a></div></div><div class="public anchor" id="var-make-subspace"><h3>make-subspace</h3><div class="usage"><code>(make-subspace prefix key)</code></div><div class="doc"><div class="markdown"><p>Returns a key with name as prefix</p>
<pre><code>(make-subspace ["class" "intro"] ["algebra"]) returns ("class" "intro" "algebra")
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L45">view source</a></div></div><div class="public anchor" id="var-serializable.3F"><h3>serializable?</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L17">view source</a></div></div><div class="public anchor" id="var-set-keys"><h3>set-keys</h3><div class="usage"><code>(set-keys tr keys value)</code></div><div class="doc"><div class="markdown"><p>Set given keys with the value</p>
<pre><code>(let [fd    (select-api-version 520)
      keys  ["foo" "baz"]
      value "bar"]
(with-open [db (open fd)]
   (tr! db (set-keys tr keys value))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L137">view source</a></div></div><div class="public anchor" id="var-set-val"><h3>set-val</h3><div class="usage"><code>(set-val tr key value &amp; {:keys [subspace], :or {subspace *subspace*}})</code></div><div class="doc"><div class="markdown"><p>Set a value for the key. Accepts the below :</p>
<p>:subspace - Subspace to be prefixed</p>
<pre><code>(let [fd    (select-api-version 520)
      key   "foo"
      value "bar"]
(with-open [db (open fd)]
   (tr! db
        (set-val tr key value))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L113">view source</a></div></div><div class="public anchor" id="var-tr.21"><h3>tr!</h3><h4 class="type">macro</h4><div class="usage"><code>(tr! db &amp; actions)</code></div><div class="doc"><div class="markdown"><p>Transaction macro to perform actions. Always use tr for actions inside each action since the transaction variable is bound to tr in the functions.</p>
<pre><code>(let [fd    (select-api-version 520)
      key   "foo"
      value "bar"]
(with-open [db (open fd)]
   (tr! db
        (set-val tr key value)
        (get-val tr key))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L22">view source</a></div></div><div class="public anchor" id="var-tr.3F"><h3>tr?</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L13">view source</a></div></div><div class="public anchor" id="var-watch"><h3>watch</h3><div class="usage"><code>(watch tr key callback)</code></div><div class="doc"><div class="markdown"><p>A key to watch and a callback function to be executed on change. It returns a future object that is realized when there is a change to key. Change in key value or clearing the key is noted as a change. A set statement with the old value is not a change.</p>
<pre><code>(let [fd    (select-api-version 520)
     key    "foo"
     value  "bar"]
(with-open [db (open fd)]
  (tr! db
       (clear-key tr key)
       (watch tr key #(println "key is set"))
       (set-val tr key value)
       (watch tr key #(println "key is changed to 1"))
       (set-val tr key value) ;; Doesn't trigger watch
       (set-val tr key "1")
       (watch tr key #(println "cleared key"))
       (clear-key tr key))))
</code></pre>
<p>key is set key is changed to 1 cleared key</p></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L192">view source</a></div></div><div class="public anchor" id="var-with-subspace"><h3>with-subspace</h3><h4 class="type">macro</h4><div class="usage"><code>(with-subspace prefix &amp; actions)</code></div><div class="doc"><div class="markdown"><p>Sets and gets the keys with the given subspace key prefixed. This essentially executes with code binding the given prefix to <em>subspace</em>.</p>
<pre><code>(let [fd    (select-api-version 520)
      key   "foo"
      value "bar"]
  (with-open [db (open fd)]
    (tr! db
         (clear-all tr)
         (with-subspace "class"
           (set-val tr key value)
           (get-val tr key))
          (nil? (get-val tr key)))))
</code></pre></div></div><div class="src-link"><a href="http://github.com/tirkarthi/clj-foundationdb/blob/master/src/clj_foundationdb/core.clj#L56">view source</a></div></div></div></body></html>